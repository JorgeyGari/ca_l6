==================
WARNING: ThreadSanitizer: data race (pid=323912)
  Read of size 8 at 0x7ffc94879ab0 by thread T2:
    #0 counter::update() /home/alumnos/a0452172/ComputerArchitecture/lab6/counter.cpp:9 (counter+0x402225)
    #1 operator() /home/alumnos/a0452172/ComputerArchitecture/lab6/counter.cpp:30 (counter+0x401395)
    #2 __invoke_impl<void, main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/invoke.h:61 (counter+0x401f23)
    #3 __invoke<main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/invoke.h:96 (counter+0x401eb8)
    #4 _M_invoke<0> /opt/gcc-12.1.0/include/c++/12.1.0/bits/std_thread.h:252 (counter+0x401e1e)
    #5 operator() /opt/gcc-12.1.0/include/c++/12.1.0/bits/std_thread.h:259 (counter+0x401dc8)
    #6 _M_run /opt/gcc-12.1.0/include/c++/12.1.0/bits/std_thread.h:210 (counter+0x401d82)
    #7 execute_native_thread_routine /opt/tmp/gcc-12.1.0_source/gcc-12.1.0/libstdc++-v3/src/c++11/thread.cc:82 (libstdc++.so.6+0xdca22)

  Previous write of size 8 at 0x7ffc94879ab0 by thread T1:
    #0 counter::update() /home/alumnos/a0452172/ComputerArchitecture/lab6/counter.cpp:9 (counter+0x40224a)
    #1 operator() /home/alumnos/a0452172/ComputerArchitecture/lab6/counter.cpp:30 (counter+0x401395)
    #2 __invoke_impl<void, main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/invoke.h:61 (counter+0x401f23)
    #3 __invoke<main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/invoke.h:96 (counter+0x401eb8)
    #4 _M_invoke<0> /opt/gcc-12.1.0/include/c++/12.1.0/bits/std_thread.h:252 (counter+0x401e1e)
    #5 operator() /opt/gcc-12.1.0/include/c++/12.1.0/bits/std_thread.h:259 (counter+0x401dc8)
    #6 _M_run /opt/gcc-12.1.0/include/c++/12.1.0/bits/std_thread.h:210 (counter+0x401d82)
    #7 execute_native_thread_routine /opt/tmp/gcc-12.1.0_source/gcc-12.1.0/libstdc++-v3/src/c++11/thread.cc:82 (libstdc++.so.6+0xdca22)

  Location is stack of main thread.

  Location is global '<null>' at 0x000000000000 ([stack]+0x1eab0)

  Thread T2 (tid=323915, running) created by main thread at:
    #0 pthread_create /opt/tmp/gcc-12.1.0_source/gcc-12.1.0/libsanitizer/tsan/tsan_interceptors_posix.cpp:1001 (libtsan.so.2+0x62486)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) /opt/tmp/gcc-12.1.0_build/x86_64-unknown-linux-gnu/libstdc++-v3/include/x86_64-unknown-linux-gnu/bits/gthr-default.h:663 (libstdc++.so.6+0xdcd2b)
    #2 construct_at<std::thread, main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/stl_construct.h:97 (counter+0x4019f5)
    #3 construct<std::thread, main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/alloc_traits.h:518 (counter+0x4016d6)
    #4 _M_realloc_insert<main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/vector.tcc:462 (counter+0x4017de)
    #5 emplace_back<main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/vector.tcc:123 (counter+0x401656)
    #6 main /home/alumnos/a0452172/ComputerArchitecture/lab6/counter.cpp:28 (counter+0x40142c)

  Thread T1 (tid=323914, running) created by main thread at:
    #0 pthread_create /opt/tmp/gcc-12.1.0_source/gcc-12.1.0/libsanitizer/tsan/tsan_interceptors_posix.cpp:1001 (libtsan.so.2+0x62486)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) /opt/tmp/gcc-12.1.0_build/x86_64-unknown-linux-gnu/libstdc++-v3/include/x86_64-unknown-linux-gnu/bits/gthr-default.h:663 (libstdc++.so.6+0xdcd2b)
    #2 construct_at<std::thread, main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/stl_construct.h:97 (counter+0x4019f5)
    #3 construct<std::thread, main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/alloc_traits.h:518 (counter+0x4016d6)
    #4 _M_realloc_insert<main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/vector.tcc:462 (counter+0x4017de)
    #5 emplace_back<main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/vector.tcc:123 (counter+0x401656)
    #6 main /home/alumnos/a0452172/ComputerArchitecture/lab6/counter.cpp:28 (counter+0x40142c)

SUMMARY: ThreadSanitizer: data race /home/alumnos/a0452172/ComputerArchitecture/lab6/counter.cpp:9 in counter::update()
==================
==================
WARNING: ThreadSanitizer: data race (pid=323912)
  Read of size 8 at 0x7ffc94879ab8 by thread T2:
    #0 counter::update() /home/alumnos/a0452172/ComputerArchitecture/lab6/counter.cpp:9 (counter+0x402267)
    #1 operator() /home/alumnos/a0452172/ComputerArchitecture/lab6/counter.cpp:30 (counter+0x401395)
    #2 __invoke_impl<void, main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/invoke.h:61 (counter+0x401f23)
    #3 __invoke<main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/invoke.h:96 (counter+0x401eb8)
    #4 _M_invoke<0> /opt/gcc-12.1.0/include/c++/12.1.0/bits/std_thread.h:252 (counter+0x401e1e)
    #5 operator() /opt/gcc-12.1.0/include/c++/12.1.0/bits/std_thread.h:259 (counter+0x401dc8)
    #6 _M_run /opt/gcc-12.1.0/include/c++/12.1.0/bits/std_thread.h:210 (counter+0x401d82)
    #7 execute_native_thread_routine /opt/tmp/gcc-12.1.0_source/gcc-12.1.0/libstdc++-v3/src/c++11/thread.cc:82 (libstdc++.so.6+0xdca22)

  Previous write of size 8 at 0x7ffc94879ab8 by thread T1:
    [failed to restore the stack]

  Location is stack of main thread.

  Location is global '<null>' at 0x000000000000 ([stack]+0x1eab8)

  Thread T2 (tid=323915, running) created by main thread at:
    #0 pthread_create /opt/tmp/gcc-12.1.0_source/gcc-12.1.0/libsanitizer/tsan/tsan_interceptors_posix.cpp:1001 (libtsan.so.2+0x62486)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) /opt/tmp/gcc-12.1.0_build/x86_64-unknown-linux-gnu/libstdc++-v3/include/x86_64-unknown-linux-gnu/bits/gthr-default.h:663 (libstdc++.so.6+0xdcd2b)
    #2 construct_at<std::thread, main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/stl_construct.h:97 (counter+0x4019f5)
    #3 construct<std::thread, main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/alloc_traits.h:518 (counter+0x4016d6)
    #4 _M_realloc_insert<main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/vector.tcc:462 (counter+0x4017de)
    #5 emplace_back<main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/vector.tcc:123 (counter+0x401656)
    #6 main /home/alumnos/a0452172/ComputerArchitecture/lab6/counter.cpp:28 (counter+0x40142c)

  Thread T1 (tid=323914, running) created by main thread at:
    #0 pthread_create /opt/tmp/gcc-12.1.0_source/gcc-12.1.0/libsanitizer/tsan/tsan_interceptors_posix.cpp:1001 (libtsan.so.2+0x62486)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) /opt/tmp/gcc-12.1.0_build/x86_64-unknown-linux-gnu/libstdc++-v3/include/x86_64-unknown-linux-gnu/bits/gthr-default.h:663 (libstdc++.so.6+0xdcd2b)
    #2 construct_at<std::thread, main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/stl_construct.h:97 (counter+0x4019f5)
    #3 construct<std::thread, main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/alloc_traits.h:518 (counter+0x4016d6)
    #4 _M_realloc_insert<main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/vector.tcc:462 (counter+0x4017de)
    #5 emplace_back<main()::<lambda()> > /opt/gcc-12.1.0/include/c++/12.1.0/bits/vector.tcc:123 (counter+0x401656)
    #6 main /home/alumnos/a0452172/ComputerArchitecture/lab6/counter.cpp:28 (counter+0x40142c)

SUMMARY: ThreadSanitizer: data race /home/alumnos/a0452172/ComputerArchitecture/lab6/counter.cpp:9 in counter::update()
==================
counter = 494236
Time = 1021200 microseconds
ThreadSanitizer: reported 2 warnings
